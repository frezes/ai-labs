# HolmesGPT Extension for KubeSphere

HolmesGPT æ˜¯ä¸€ä¸ªä¸“ä¸º KubeSphere è®¾è®¡çš„ AI åŠ©æ‰‹æ‰©å±•ï¼Œæä¾›äº‘åŸç”Ÿç¯å¢ƒæ•…éšœæ’æŸ¥å’Œæ™ºèƒ½è¿ç»´åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¤– æ™ºèƒ½èŠå¤©
- ä¸ HolmesGPT AI åŠ©æ‰‹è¿›è¡Œè‡ªç„¶è¯­è¨€å¯¹è¯
- æ”¯æŒ Markdown æ ¼å¼çš„æ¶ˆæ¯æ¸²æŸ“
- å®æ—¶æ¶ˆæ¯æµå’Œå·¥å…·è°ƒç”¨å±•ç¤º
- æ¶ˆæ¯å¤åˆ¶å’Œå†å²è®°å½•åŠŸèƒ½

### ğŸ” å‘Šè­¦è°ƒæŸ¥
- è‡ªåŠ¨åŒ–é—®é¢˜è°ƒæŸ¥å’Œåˆ†æ
- æ”¯æŒ `@investigate` å‘½ä»¤è§¦å‘è°ƒæŸ¥æ¨¡å¼
- è¯¦ç»†çš„è°ƒæŸ¥ç»“æœå’Œå·¥å…·è°ƒç”¨å±•ç¤º
- åç»­æ“ä½œå»ºè®®

### ğŸ¥ åº”ç”¨å¥åº·æ£€æŸ¥
- å·¥ä½œè´Ÿè½½å¥åº·çŠ¶æ€æ£€æŸ¥
- æ”¯æŒ `@workload_health` å‘½ä»¤å’Œ `#resource{kind,ns,name}` æ ¼å¼
- å®æ—¶å¥åº·çŠ¶æ€ç›‘æ§
- è¯¦ç»†çš„æ£€æŸ¥ç»“æœå’Œå»ºè®®

## æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **React 18** - ç”¨æˆ·ç•Œé¢æ¡†æ¶
- **Styled-components** - CSS-in-JS æ ·å¼æ–¹æ¡ˆ
- **React Router DOM** - å®¢æˆ·ç«¯è·¯ç”±
- **@kubed/components** - KubeSphere è®¾è®¡ç³»ç»Ÿç»„ä»¶
- **@kubed/icons** - KubeSphere å›¾æ ‡åº“

### æ ¸å¿ƒç»„ä»¶
- `Layout` - ä¸»å¸ƒå±€ç»„ä»¶ï¼ŒåŒ…å«ä¾§è¾¹æ å’Œå†…å®¹åŒºåŸŸ
- `Sidebar` - å·¦ä¾§å¯¼èˆªæ ï¼Œæä¾›åŠŸèƒ½åˆ‡æ¢
- `NewChat` - æ–°èŠå¤©é¡µé¢ï¼Œé›†æˆæ‰€æœ‰èŠå¤©åŠŸèƒ½
- `MessageList` - æ¶ˆæ¯åˆ—è¡¨ç»„ä»¶ï¼Œæ”¯æŒ Markdown æ¸²æŸ“
- `InputArea` - è¾“å…¥åŒºåŸŸç»„ä»¶ï¼Œæ”¯æŒå¤šè¡Œè¾“å…¥å’Œå¿«æ·é”®
- `WelcomeScreen` - æ¬¢è¿å±å¹•ï¼Œæä¾›åŠŸèƒ½å¼•å¯¼

## å®‰è£…å’Œé…ç½®

### 1. ç¯å¢ƒè¦æ±‚
- KubeSphere 3.0+
- Node.js 16+
- ç°ä»£æµè§ˆå™¨æ”¯æŒ

### 2. å®‰è£…æ‰©å±•
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd extensions/holmesgpt

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºæ‰©å±•
npm run build
```

### 3. é…ç½® API åœ°å€

#### æ–¹æ³•ä¸€ï¼šé€šè¿‡é…ç½®æ–‡ä»¶ï¼ˆæ¨èï¼‰
```yaml
# holmesgpt-config.yaml
api:
  url: "http://your-holmesgpt-server:8000"
  timeout: 30000
  debug: false
```

#### æ–¹æ³•äºŒï¼šé€šè¿‡ç¯å¢ƒå˜é‡
```bash
export REACT_APP_HOLMESGPT_API_URL="http://localhost:8000"
```

#### æ–¹æ³•ä¸‰ï¼šé€šè¿‡ KubeSphere ä»£ç†
```yaml
api:
  url: "/api"  # é€šè¿‡ KubeSphere ä»£ç†ï¼Œé¿å… CORS é—®é¢˜
```

### 4. éƒ¨ç½²åˆ° KubeSphere
å°†æ„å»ºåçš„æ–‡ä»¶éƒ¨ç½²åˆ° KubeSphere æ‰©å±•ç›®å½•ï¼Œæˆ–ä½¿ç”¨æä¾›çš„ Dockerfile æ„å»ºå®¹å™¨é•œåƒã€‚

## ä½¿ç”¨æŒ‡å—

### åŸºæœ¬èŠå¤©
1. ç‚¹å‡»å·¦ä¾§å¯¼èˆªæ çš„"æ–°èŠå¤©"
2. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ‚¨çš„é—®é¢˜
3. æŒ‰ `Ctrl+Enter` å‘é€æ¶ˆæ¯ï¼Œæˆ–ç‚¹å‡»å‘é€æŒ‰é’®

### å‘Šè­¦è°ƒæŸ¥
1. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ `@investigate <èµ„æºç±»å‹> <èµ„æºåç§°> [æè¿°]`
2. ä¾‹å¦‚ï¼š`@investigate Pod my-pod åœ¨ default å‘½åç©ºé—´å´©æºƒäº†`
3. HolmesGPT å°†è‡ªåŠ¨åˆ†æé—®é¢˜å¹¶æä¾›è¯¦ç»†æŠ¥å‘Š

### å¥åº·æ£€æŸ¥
1. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ `@workload_health #resource{kind,ns,name}`
2. ä¾‹å¦‚ï¼š`@workload_health #resource{Deployment,default,my-app}`
3. ç³»ç»Ÿå°†æ£€æŸ¥æŒ‡å®šå·¥ä½œè´Ÿè½½çš„å¥åº·çŠ¶æ€

## é…ç½®é€‰é¡¹

### API é…ç½®
```yaml
api:
  url: "/api"                    # API æœåŠ¡å™¨åœ°å€
  timeout: 30000                 # è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  debug: false                   # æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼
```

### åŠŸèƒ½é…ç½®
```yaml
features:
  chat: true                     # å¯ç”¨èŠå¤©åŠŸèƒ½
  healthCheck: true              # å¯ç”¨å¥åº·æ£€æŸ¥åŠŸèƒ½
  alertInvestigation: true       # å¯ç”¨å‘Šè­¦è°ƒæŸ¥åŠŸèƒ½
```

### ç•Œé¢é…ç½®
```yaml
ui:
  language: "zh"                 # ç•Œé¢è¯­è¨€ (zh/en)
  theme: "light"                 # ä¸»é¢˜ (light/dark)
  sidebarWidth: 240              # ä¾§è¾¹æ å®½åº¦
```

## å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„
```
src/
â”œâ”€â”€ components/          # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ Layout.jsx      # ä¸»å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ Sidebar.jsx     # ä¾§è¾¹æ ç»„ä»¶
â”‚   â”œâ”€â”€ MessageList.jsx # æ¶ˆæ¯åˆ—è¡¨ç»„ä»¶
â”‚   â”œâ”€â”€ InputArea.jsx   # è¾“å…¥åŒºåŸŸç»„ä»¶
â”‚   â”œâ”€â”€ WelcomeScreen.jsx # æ¬¢è¿å±å¹•ç»„ä»¶
â”‚   â””â”€â”€ MarkdownRenderer.jsx # Markdown æ¸²æŸ“å™¨
â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ NewChat.jsx     # æ–°èŠå¤©é¡µé¢
â”‚   â”œâ”€â”€ HealthCheck.jsx # å¥åº·æ£€æŸ¥é¡µé¢
â”‚   â””â”€â”€ AlertInvestigation.jsx # å‘Šè­¦è°ƒæŸ¥é¡µé¢
â”œâ”€â”€ lib/                # æ ¸å¿ƒåº“
â”‚   â”œâ”€â”€ api.js          # API å®¢æˆ·ç«¯
â”‚   â””â”€â”€ config.js       # é…ç½®ç®¡ç†å™¨
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ index.js        # é€šç”¨å·¥å…·å‡½æ•°
â”œâ”€â”€ locales/            # å›½é™…åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ zh/             # ä¸­æ–‡è¯­è¨€åŒ…
â”‚   â””â”€â”€ en/             # è‹±æ–‡è¯­è¨€åŒ…
â”œâ”€â”€ routes/             # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ index.js        # è·¯ç”±å®šä¹‰
â””â”€â”€ index.js            # æ‰©å±•å…¥å£æ–‡ä»¶
```

### å¼€å‘å‘½ä»¤
```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# ä»£ç æ£€æŸ¥
npm run lint

# æ ¼å¼åŒ–ä»£ç 
npm run format
```

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨ `src/pages/` ä¸­åˆ›å»ºæ–°é¡µé¢ç»„ä»¶
2. åœ¨ `src/routes/index.js` ä¸­æ·»åŠ è·¯ç”±
3. åœ¨ `src/components/Sidebar.jsx` ä¸­æ·»åŠ å¯¼èˆªé¡¹
4. æ›´æ–°å›½é™…åŒ–æ–‡ä»¶

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **CORS é”™è¯¯**
   - ä½¿ç”¨ KubeSphere ä»£ç†æ¨¡å¼ï¼š`url: "/api"`
   - æˆ–é…ç½® API æœåŠ¡å™¨æ”¯æŒ CORS

2. **API è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ API æœåŠ¡å™¨åœ°å€å’Œç«¯å£
   - éªŒè¯ç½‘ç»œè¿æ¥
   - å¯ç”¨è°ƒè¯•æ¨¡å¼æŸ¥çœ‹è¯¦ç»†é”™è¯¯

3. **æ‰©å±•æ— æ³•åŠ è½½**
   - æ£€æŸ¥ KubeSphere ç‰ˆæœ¬å…¼å®¹æ€§
   - éªŒè¯æ‰©å±•é…ç½®æ ¼å¼
   - æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### è°ƒè¯•æ¨¡å¼
å¯ç”¨è°ƒè¯•æ¨¡å¼å¯ä»¥æŸ¥çœ‹è¯¦ç»†çš„ API è¯·æ±‚å’Œå“åº”ä¿¡æ¯ï¼š
```yaml
api:
  debug: true
```

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature/new-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -am 'Add new feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/new-feature`
5. æäº¤ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤ [Issue](https://github.com/your-repo/issues)
- å‘é€é‚®ä»¶è‡³ï¼šsupport@example.com
- æŸ¥çœ‹ [æ–‡æ¡£](https://docs.example.com)

---

**HolmesGPT Extension** - è®©äº‘åŸç”Ÿè¿ç»´æ›´æ™ºèƒ½ ğŸš€
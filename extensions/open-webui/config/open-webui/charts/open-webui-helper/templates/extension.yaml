apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "open-webui-helper.fullname" . }}-js-bundle
  namespace: {{ .Release.Namespace }}
data:
  index.js: |
    System.register(["@kubed/components","react","react-router-dom"],function(e,t){var r={},n={},o={};return{setters:[function(e){r.Loading=e.Loading},function(e){n.default=e.default,n.useEffect=e.useEffect},function(e){o.useNavigate=e.useNavigate}],execute:function(){e(function(){var e={725:function(e,t,r){var n=r(825).y;t.w=function(e){if(e||(e=1),!r.y.meta||!r.y.meta.url)throw console.error("__system_context__",r.y),Error("systemjs-webpack-interop was provided an unknown SystemJS context. Expected context.meta.url, but none was provided");r.p=n(r.y.meta.url,e)}},726:function(e){"use strict";e.exports=n},761:function(e){"use strict";e.exports=r},825:function(e,t,r){function n(e,t){var r=document.createElement("a");r.href=e;for(var n="/"===r.pathname[0]?r.pathname:"/"+r.pathname,o=0,i=n.length;o!==t&&i>=0;){"/"===n[--i]&&o++}if(o!==t)throw Error("systemjs-webpack-interop: rootDirectoryLevel ("+t+") is greater than the number of directories ("+o+") in the URL path "+e);var a=n.slice(0,i+1);return r.protocol+"//"+r.host+a}t.y=n;var o=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}},965:function(e){"use strict";e.exports=o}},i={};function a(t){var r=i[t];if(void 0!==r)return r.exports;var n=i[t]={exports:{}};return e[t](n,n.exports,a),n.exports}a.y=t,a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e}();return(0,a(725).w)(1),function(){"use strict";var e=a(726),t=a(965),r=a(761);function n(){var n=(0,t.useNavigate)();return(0,e.useEffect)(function(){window.open("{{ .Values.openWebUIUrl }}"),n(-1,{replace:!0})},[]),e.default.createElement(r.Loading,{className:"page-loading"})}var o={routes:[{path:"/open-webui-shortcut",element:e.default.createElement(n,null)}],menus:[{parent:"global",name:"open-webui-shortcut",title:"Open WebUI",icon:"cluster",order:0,desc:"Open WebUI Shortcut",skipAuth:!0}]};globals.context.registerExtension(o)}(),{}}())}}});
---
apiVersion: extensions.kubesphere.io/v1alpha1
kind: JSBundle
metadata:
  name: {{ .Release.Namespace }}-js-bundle
spec:
  rawFrom:
    configMapKeyRef:
      key: index.js
      name: {{ include "open-webui-helper.fullname" . }}-js-bundle
      namespace: {{ .Release.Namespace }}
status:
  link: /dist/{{ .Release.Name }}/index.js
  state: Available
